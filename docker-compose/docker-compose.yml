version: "3"

services:
  namenode:
    image: sasha0986/hadoopdocker:namenode
    container_name: namenode
    restart: always
    ports:
      - 9870:9870
      - 8088:8088
      - 8020:8020
    volumes:
      - /opt/mount1/namenode-dir:/opt/mount1/namenode-dir
      - /opt/mount2/namenode-dir:/opt/mount2/namenode-dir
    extra_hosts:
      - headnode:127.0.0.1

  datanode:
    image: sasha0986/hadoopdocker:worker
    container_name: datanode
    restart: always
    ports:
      - 9864:9864
      - 9867:9867
      - 9866:9866
      - 9865:9865
    volumes:
      - /opt/mount1/datanode-dir:/opt/mount1/datanode-dir
      - /opt/mount2/datanode-dir:/opt/mount2/datanode-dir
      - /opt/mount1/nodemanager-local-dir:/opt/mount1/nodemanager-local-dir
      - /opt/mount2/nodemanager-local-dir:/opt/mount2/nodemanager-local-dir
      - /opt/mount1/nodemanager-log-dir:/opt/mount1/nodemanager-log-dir
      - /opt/mount2/nodemanager-log-dir:/opt/mount2/nodemanager-log-dir
    extra_hosts:
      - datanode:127.0.0.1
